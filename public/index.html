<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Video Chat</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>Random Video Chat</h1>
            <p>Connect with Strangers instantly</p>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Start Screen -->
            <div id="start-screen" class="screen active">
                <div class="welcome-card">
                    <h2>Welcome to Random Video Chat</h2>
                    <p>Click the button below to start chatting with a random person</p>
                    <button id="start-chat-btn" class="btn btn-primary">
                        <span>Start Video Chat</span>
                        <div class="btn-shine"></div>
                    </button>
                </div>
            </div>

            <!-- Waiting Screen -->
            <div id="waiting-screen" class="screen">
                <div class="waiting-card">
                    <div class="spinner"></div>
                    <h2>Looking for someone to chat with...</h2>
                    <p>Please wait while we find you a chat partner</p>
                    <button id="cancel-waiting-btn" class="btn btn-secondary">Cancel</button>
                </div>
            </div>

            <!-- Video Chat Screen -->
            <div id="chat-screen" class="screen">
                <div class="video-controls-wrapper">
                    <div class="video-area">
                        <div class="video-box remote">
                            <video id="remote-video" autoplay playsinline></video>
                            <div class="video-label">Partner</div>
                            <div id="partner-video-status" class="partner-status video-status hidden">
                                <span>Video Off</span>
                            </div>
                            <div id="partner-audio-status" class="partner-status audio-status hidden">
                                <span>Muted</span>
                            </div>
                        </div>
                        <div class="video-box local">
                            <video id="local-video" autoplay playsinline muted></video>
                            <div class="video-label">You</div>
                        </div>
                    </div>
                    <!-- Controls Bar (now always below video area) -->
                    <div class="controls-bar">
                        <button id="toggle-video-btn" class="control-btn video-on" title="Toggle Video">
                            <!-- Material Icon: Videocam (on) -->
                            <svg class="icon-svg icon-video-on" xmlns="http://www.w3.org/2000/svg" height="32" viewBox="0 0 24 24" width="32" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 10.5V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3.5l4 4v-11l-4 4z"/></svg>
                            <!-- Material Icon: Videocam Off (off) -->
                            <svg class="icon-svg icon-video-off" style="display:none;" xmlns="http://www.w3.org/2000/svg" height="32" viewBox="0 0 24 24" width="32" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 10.5V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3.5l4 4v-11l-4 4z"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
                        </button>
                        <button id="toggle-audio-btn" class="control-btn audio-on" title="Toggle Audio">
                            <!-- Material Icon: Mic (on) -->
                            <svg class="icon-svg icon-audio-on" xmlns="http://www.w3.org/2000/svg" height="32" viewBox="0 0 24 24" width="32" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="2" width="6" height="12" rx="3"/><path d="M5 10v2a7 7 0 0 0 14 0v-2"/></svg>
                            <!-- Material Icon: Mic Off (off) -->
                            <svg class="icon-svg icon-audio-off" style="display:none;" xmlns="http://www.w3.org/2000/svg" height="32" viewBox="0 0 24 24" width="32" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="2" width="6" height="12" rx="3"/><path d="M5 10v2a7 7 0 0 0 14 0v-2"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
                        </button>
                        <button id="next-chat-btn" class="control-btn" title="Next Chat">
                            <!-- Material Icon: Skip Next -->
                            <svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" height="32" viewBox="0 0 24 24" width="32" fill="none" stroke="currentColor" stroke-width="2"><polygon points="6 18 14.5 12 6 6 6 18"/><rect x="16" y="6" width="2" height="12" rx="1"/></svg>
                        </button>
<button id="end-chat-btn" class="control-btn end-call" title="End Chat">
    <!-- Material Icon: Call End (curved hangup style) -->
    <svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" height="32" viewBox="0 0 24 24" width="32" fill="currentColor">
        <path d="M21 15.46c-1.12 0-2.24-.11-3.32-.32-.3-.06-.62 0-.87.18l-2.54 1.91a16.88 16.88 0 0 1-4.54 0l-2.54-1.91a1.01 1.01 0 0 0-.87-.18A16.9 16.9 0 0 1 3 15.46a1 1 0 0 0-1 1.05v2.99c0 .6.52 1.08 1.11.99 1.77-.28 3.48-.78 5.09-1.49l1.87 1.41c1.2.9 2.79.9 3.99 0l1.87-1.41c1.61.71 3.32 1.21 5.09 1.49a1 1 0 0 0 1.11-.99v-2.99a1 1 0 0 0-1-1.05z"/>
    </svg>
</button>

                        <button id="toggle-chat-btn" class="control-btn" title="Toggle Chat">
                            <!-- Material Icon: Chat Bubble -->
                            <svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" height="32" viewBox="0 0 24 24" width="32" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                        </button>
                        <button id="debug-media-btn" class="control-btn" title="Debug Media">
                            <!-- Material Icon: Bug Report -->
                            <svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" height="32" viewBox="0 0 24 24" width="32" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M19 7l-1.5 1.5M5 7l1.5 1.5M12 8v4M12 16h.01"/></svg>
                        </button>
                    </div>
                </div>
                <!-- Chat Panel (sibling, not inside video area) -->
                <div id="chat-panel" class="chat-panel">
                    <div class="chat-header">
                        <h3>Chat</h3>
                        <button id="close-chat-btn" class="close-btn">Ã—</button>
                    </div>
                    <div id="chat-messages" class="chat-messages"></div>
                    <div class="chat-input-container">
                        <input type="text" id="chat-input" placeholder="Type a message..." />
                        <button id="send-message-btn">Send</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Status Bar -->
        <div id="status-bar" class="status-bar">
            <span id="status-text">Ready to connect</span>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>
